{"version":3,"file":"polyfill.min.js","sources":["namespaces.js","config-utils.js","config/global.js","config/html.js","config/svg.js","config/mathml.js","config/base.js","config/complete.js","sanitize.js","trust.js","polyfill.js"],"sourcesContent":["/**\n * @copyright 2023-2024 Chris Zuber <admin@kernvalley.us>\n */\nexport const HTML = 'http://www.w3.org/1999/xhtml';\nexport const SVG = 'http://www.w3.org/2000/svg';\nexport const XLINK = 'http://www.w3.org/1999/xlink';\nexport const XML = 'http://www.w3.org/XML/1998/namespace';\nexport const MATHML = 'http://www.w3.org/1998/Math/MathML';\n","import { HTML as HTMLNS } from '@aegisjsproject/sanitizer/namespaces.js';\n\nexport const EVENT_ATTRS = new Set(('HTMLElement' in globalThis\n\t? Object.keys(HTMLElement.prototype) : [])\n\t.filter(name => name.startsWith('on')));\n\nexport function normalizeElement(opt, defaultNS = HTMLNS) {\n\tif (typeof opt === 'string') {\n\t\treturn Object.freeze({ name: opt, namespace: defaultNS });\n\t} else if (typeof opt === 'object' && typeof opt.name === 'string') {\n\t\tconst { name, namespace = defaultNS, attributes } = opt;\n\t\treturn Object.freeze({\n\t\t\tname,\n\t\t\tnamespace: typeof namespace === 'string' && namespace.length !== 0 ? namespace : defaultNS,\n\t\t\tattributes,\n\t\t});\n\t} else {\n\t\tthrow new TypeError('Invalid config entry for `elements`.');\n\t}\n}\n\nfunction normalizeElementsConfig({ elements, allowElements }, defaultNS = HTMLNS) {\n\tif (Array.isArray(allowElements)) {\n\t\tconsole.warn('Use of `allowElements` is deprecated. Please use `elements` instead.');\n\t\treturn normalizeElementsConfig({ elements: allowElements }, defaultNS);\n\t} else if (! Array.isArray(elements)) {\n\t\tthrow new TypeError('`elements` expected to be an array.');\n\t} else {\n\t\treturn elements.map(opt => normalizeElement(opt, defaultNS));\n\t}\n}\n\nexport function normalizeAttr(opt, defaultNS) {\n\tif (typeof opt === 'string') {\n\t\treturn Object.freeze({ name: opt, namespace: defaultNS });\n\t} else if (typeof opt === 'object' && typeof opt.name === 'string') {\n\t\tconst { name, namespace = defaultNS, elements, ...rest } = opt;\n\t\treturn Object.freeze({\n\t\t\tname,\n\t\t\tnamespace: typeof namespace === 'string' ? namespace : defaultNS,\n\t\t\telements,\n\t\t\t...rest\n\t\t});\n\t} else {\n\t\tthrow new TypeError('Invalid entry in `attributes` config.');\n\t}\n}\n\nfunction normalizeAttrsConfig({ attributes, allowAttributes }, defaultNS) {\n\tif (typeof allowAttributes !== 'undefined') {\n\t\tconsole.warn('Use of `allowAttributes` is deprecated. Please use `attributes` instead.');\n\t\treturn normalizeAttrsConfig({ attributes: allowAttributes }, defaultNS);\n\t} else if (Array.isArray(attributes)) {\n\t\treturn attributes.map(opt => normalizeAttr(opt, defaultNS));\n\t} else if (typeof attributes === 'object' && attributes !== null) {\n\t\tconsole.warn('`attributes` should be an array, not an oobject.');\n\t\treturn normalizeAttrsConfig({\n\t\t\tattributes: Object.entries(attributes).map(([name, elements]) => ({ name, elements })),\n\t\t}, defaultNS);\n\t} else {\n\t\tthrow new TypeError('`attributes` expected to be an array.');\n\t}\n}\n\nfunction normalizeCommentsConfig({ comments, allowComments }) {\n\tif (typeof allowComments === 'boolean') {\n\t\tconsole.warn('Use of `allowComments` is deprecated. Please use `comments` instead.');\n\t\treturn allowComments;\n\t} else if (typeof comments === 'boolean') {\n\t\treturn comments;\n\t} else {\n\t\treturn true;\n\t}\n}\n\nexport function normalizeConfig(config, {\n\telementNS = HTMLNS,\n\tattributeNS,\n} = {}) {\n\tconst {\n\t\telements,\n\t\tattributes,\n\t\tallowElements,\n\t\tallowAttributes,\n\t\tcomments = false,\n\t\tallowComments,\n\t\tdataAttributes = true,\n\t\t...rest\n\t} = config;\n\tconst cfg = {\n\t\telements: normalizeElementsConfig({ elements, allowElements }, elementNS),\n\t\tattributes: normalizeAttrsConfig({ attributes, allowAttributes }, attributeNS),\n\t\tcomments: comments || allowComments,\n\t\tdataAttributes,\n\t\t...rest,\n\t};\n\n\treturn cfg;\n}\n\nfunction convertAttrConfig({ attributes, allowAttributes }, defaultNS) {\n\treturn Object.freeze(\n\t\tObject.groupBy(\n\t\t\tnormalizeAttrsConfig({ attributes, allowAttributes }, defaultNS),\n\t\t\t({ namespace }) => namespace ?? ''\n\t\t)\n\t);\n}\n\nfunction convertElementConfig({ elements, allowElements }, defaultNS = HTMLNS) {\n\treturn Object.freeze(\n\t\tObject.groupBy(\n\t\t\tnormalizeElementsConfig({ elements, allowElements }, defaultNS),\n\t\t\t({ namespace }) => namespace\n\t\t)\n\t);\n}\n\nexport function convertConfig(config, {\n\telementNS = HTMLNS,\n\tattributeNS,\n} = {}) {\n\tif (typeof config !== 'object' || config === null) {\n\t\tthrow new TypeError('Sanitizer config must be an object.');\n\t} else if (config.get instanceof Function) {\n\t\treturn convertConfig(config.get());\n\t} else {\n\t\treturn Object.freeze({\n\t\t\telements: convertElementConfig(config, elementNS),\n\t\t\tattributes: convertAttrConfig(config, attributeNS),\n\t\t\tcomments: normalizeCommentsConfig(config),\n\t\t\tdataAttributes: typeof config.dataAttributes === 'undefined' ? true : config.dataAttributes,\n\t\t});\n\t}\n}\n","import { normalizeAttr } from '@aegisjsproject/sanitizer/config-utils.js';\n\nexport const attributes = Object.freeze([\n\t'accesskey', 'autocapitalize', 'autofocus', 'class', 'contenteditable',\n\t'dir', 'draggable', 'enterkeyhint', 'exportparts', 'height', 'hidden', 'id',\n\t'inert', 'inputmode', 'itemid', 'itemprop', 'itemref',\n\t'itemscope', 'itemtype', 'lang', 'part', 'popover',\n\t'slot', 'spellcheck', 'tabindex', 'title', 'translate',\n\t'virtualkeyboardpolicy', 'width',\n\t/**\n\t * Aria-Attributes\n\t * @see https://developer.mozilla.org/en-US/docs/Web/Accessibility/ARIA/Attributes/\n\t */\n\t'aria-keyshortcuts', 'aria-activedescendant', 'aria-atomic', 'aria-autocomplete',\n\t'aria-braillelabel', 'aria-brailleroledescription', 'aria-busy', 'aria-checked',\n\t'aria-colcount', 'aria-colindex', 'aria-colindextext', 'aria-colspan',\n\t'aria-controls', 'aria-current', 'aria-describedby', 'aria-description',\n\t'aria-details', 'aria-disabled', 'aria-dropeffect', 'aria-errormessage',\n\t'aria-expanded', 'aria-flowto', 'aria-grabbed', 'aria-haspopup', 'aria-hidden',\n\t'aria-invalid', 'aria-label', 'aria-labelledby', 'aria-level',\n\t'aria-live', 'aria-modal', 'aria-multiline', 'aria-multiselectable', 'aria-orientation',\n\t'aria-owns', 'aria-placeholder', 'aria-posinset', 'aria-pressed',\n\t'aria-readonly', 'aria-relevant', 'aria-required', 'aria-roledescription',\n\t'aria-rowcount', 'aria-rowindex', 'aria-rowindextext', 'aria-rowspan',\n\t'aria-selected', 'aria-setsize', 'aria-sort', 'aria-valuemax', 'aria-valuemin',\n\t'aria-valuenow', 'aria-valuetext',\n].map(attr => normalizeAttr(attr, null)));\n","/**\n * @copyright 2023-2025 Chris Zuber <admin@kernvalley.us>\n * @see https://wicg.github.io/sanitizer-api/#built-in-safe-default-configuration\n */\nimport { HTML as namespace } from '@aegisjsproject/sanitizer/namespaces.js';\nimport { normalizeAttr, normalizeElement } from '@aegisjsproject/sanitizer/config-utils.js';\nimport { attributes as globalAttrs } from '@aegisjsproject/sanitizer/config/global.js';\nexport const comments = true;\n\nexport const dataAttributes = true;\n\n/**\n * Tags listed on MDN, + a few deprecated / experimental ones\n * Selector: `#content table td > a[href^=\"/en-US/docs/Web/HTML/Element/\"] > code`\n * @see https://developer.mozilla.org/en-US/docs/Web/HTML/Element\n */\nexport const elements = Object.freeze([\n\t'html', 'head', 'link', 'meta', 'body', 'address', 'article', 'aside', 'footer',\n\t'header', 'h1', 'h2', 'h3', 'h4', 'h5', 'h6', 'hgroup', 'main', 'nav', 'section',\n\t'search', 'blockquote', 'cite', 'div', 'dd', 'dt', 'dl', 'figcaption', 'figure',\n\t'hr', 'li', 'ol', 'ul', 'menu', 'p', 'pre', 'a', 'abbr', 'b', 'bdi', 'bdo', 'br',\n\t'code', 'data', 'dfn', 'em', 'i', 'kbd', 'mark', 'q', 'rp', 'ruby', 'rt', 's',\n\t'del', 'ins', 'samp', 'small', 'span', 'strong', 'sub', 'sup', 'time', 'u',\n\t'var', 'wbr', 'area', 'audio', 'img', 'map', 'track', 'video', 'picture',\n\t'source', 'canvas', 'caption', 'col', 'colgroup', 'table', 'tbody', 'tr', 'td',\n\t'tfoot', 'th', 'thead', 'button', 'datalist', 'option', 'fieldset', 'label',\n\t'form', 'input', 'legend', 'meter', 'optgroup', 'select', 'output', 'progress',\n\t'textarea', 'details', 'summary', 'dialog', 'slot', 'dir', 'template',\n\t'strike', 'selectmenu', 'center',\n].map(el => normalizeElement(el, namespace)));\n\nexport const htmlAttributes = Object.freeze([\n\t'abbr',\n\t'accept',\n\t'accept-charset',\n\t// 'accesskey', //global\n\t// 'action',\n\t'align',\n\t'alink',\n\t'allow',\n\t'allowfullscreen',\n\t'alt',\n\t'anchor',\n\t'archive',\n\t'as',\n\t'async',\n\t// 'autocapitalize', //global\n\t'autocomplete',\n\t'autocorrect',\n\t// 'autofocus', //global\n\t'autopictureinpicture',\n\t'autoplay',\n\t'axis',\n\t'background',\n\t'behavior',\n\t// 'bgcolor',\n\t'border',\n\t'bordercolor',\n\t'capture',\n\t'cellpadding',\n\t'cellspacing',\n\t'challenge',\n\t'char',\n\t'charoff',\n\t'charset',\n\t'checked',\n\t'cite',\n\t// 'class', //global\n\t'classid',\n\t'clear',\n\t'code',\n\t// 'codebase',\n\t'codetype',\n\t'color',\n\t'cols',\n\t'colspan',\n\t'command',\n\t'commandfor',\n\t'compact',\n\t'content',\n\t// 'contenteditable', //global\n\t'controls',\n\t'controlslist',\n\t'conversiondestination',\n\t'coords',\n\t'crossorigin',\n\t'csp',\n\t'data',\n\t'datetime',\n\t'declare',\n\t'decoding',\n\t'default',\n\t'defer',\n\t// 'dir', //global\n\t'direction',\n\t'dirname',\n\t'disabled',\n\t'disablepictureinpicture',\n\t'disableremoteplayback',\n\t'disallowdocumentaccess',\n\t'download',\n\t// 'draggable', //global\n\t'elementtiming',\n\t'enctype',\n\t'end',\n\t// 'enterkeyhint', //global\n\t// 'event',\n\t// 'exportparts', //global\n\t// 'face',\n\t'for',\n\t'form',\n\t// 'formaction',\n\t'formenctype',\n\t'formmethod',\n\t'formnovalidate',\n\t'formtarget',\n\t// 'frame',\n\t'frameborder',\n\t'headers',\n\t// 'height', //global\n\t// 'hidden', //global\n\t'high',\n\t'href',\n\t'hreflang',\n\t'hreftranslate',\n\t'hspace',\n\t// 'http-equiv',\n\t// 'id', //global\n\t'imagesizes',\n\t'imagesrcset',\n\t'importance',\n\t'impressiondata',\n\t'impressionexpiry',\n\t'incremental',\n\t// 'inert', //global\n\t// 'inputmode', //global\n\t'integrity',\n\t'invisible',\n\t'is',\n\t'ismap',\n\t'keytype',\n\t'kind',\n\t'label',\n\t// 'lang', //global\n\t'language',\n\t'latencyhint',\n\t'leftmargin',\n\t'link',\n\t'list',\n\t'loading',\n\t'longdesc',\n\t'loop',\n\t'low',\n\t'lowsrc',\n\t'manifest',\n\t'marginheight',\n\t'marginwidth',\n\t'max',\n\t'maxlength',\n\t'mayscript',\n\t'media',\n\t'method',\n\t'min',\n\t'minlength',\n\t'multiple',\n\t'muted',\n\t'name',\n\t'nohref',\n\t'nomodule',\n\t// 'nonce',\n\t'noresize',\n\t'noshade',\n\t'novalidate',\n\t'nowrap',\n\t'object',\n\t'open',\n\t'optimum',\n\t// 'part', //global\n\t'pattern',\n\t'ping',\n\t'placeholder',\n\t'playsinline',\n\t'policy',\n\t// 'popover', //global\n\t'popovertarget',\n\t'popovertargetaction',\n\t'poster',\n\t'preload',\n\t'pseudo',\n\t'readonly',\n\t'referrerpolicy',\n\t'rel',\n\t'reportingorigin',\n\t'required',\n\t'resources',\n\t'rev',\n\t'reversed',\n\t'role',\n\t'rows',\n\t'rowspan',\n\t'rules',\n\t'sandbox',\n\t'scheme',\n\t'scope',\n\t'scopes',\n\t'scrollamount',\n\t'scrolldelay',\n\t'scrolling',\n\t'select',\n\t'selected',\n\t'shadowrootclonable',\n\t'shadowrootdelegatesfocus',\n\t'shadowrootmode',\n\t'shadowrootserializable',\n\t'shape',\n\t'size',\n\t'sizes',\n\t// 'slot', //global\n\t'span',\n\t// 'spellcheck',  //global\n\t'src',\n\t'srcdoc',\n\t'srclang',\n\t'srcset',\n\t'standby',\n\t'start',\n\t'step',\n\t// 'style',\n\t'summary',\n\t// 'tabindex',//global\n\t'target',\n\t'text',\n\t// 'title', //global\n\t'topmargin',\n\t// 'translate', //global\n\t'truespeed',\n\t'trusttoken',\n\t'type',\n\t'usemap',\n\t'valign',\n\t'value',\n\t'valuetype',\n\t'version',\n\t// 'virtualkeyboardpolicy', //global\n\t'vlink',\n\t'vspace',\n\t'webkitdirectory',\n\t// 'width', //global\n\t'wrap',\n].map(attr => normalizeAttr(attr, null)));\n\nexport const attributes = Object.freeze(htmlAttributes.concat(globalAttrs));\n\nexport const sanitizer = Object.freeze({ comments, elements, attributes, dataAttributes });\n","import { SVG as SVGNS, XLINK, XML as XMLNS } from '@aegisjsproject/sanitizer/namespaces.js';\nimport { attributes as globalAttrs } from '@aegisjsproject/sanitizer/config/global.js';\nimport { normalizeAttr, normalizeElement } from '@aegisjsproject/sanitizer/config-utils.js';\n\n/**\n * @see https://developer.mozilla.org/en-US/docs/Web/SVG/Element\n */\n\nexport const comments = true;\n\nexport const dataAttributes = true;\n\nexport const elements = Object.freeze([\n\t'a', 'animate', 'animateMotion', 'animateTransform', 'circle', 'clipPath',\n\t'defs', 'desc', 'ellipse', 'feBlend', 'feColorMatrix', 'feComponentTransfer',\n\t'feComposite', 'feConvolveMatrix', 'feDiffuseLighting', 'feDisplacementMap',\n\t'feDistantLight', 'feDropShadow', 'feFlood', 'feFuncA', 'feFuncB', 'feFuncG',\n\t'feFuncR', 'feGaussianBlur', 'feImage', 'feMerge', 'feMergeNode', 'feMorphology',\n\t'feOffset', 'fePointLight', 'feSpecularLighting', 'feSpotLight', 'feTile',\n\t'feTurbulence', 'filter', 'foreignObject', 'g', 'line', 'linearGradient',\n\t'marker', 'mask', 'metadata', 'mpath', 'path', 'pattern', 'polygon', 'polyline',\n\t'radialGradient', 'rect', 'script', 'set', 'stop', 'style', 'svg', 'switch',\n\t'symbol', 'text', 'textPath', 'title', 'tspan', 'view', 'missing-glyph', 'font',\n\t'font-face', 'font-face-format', 'font-face-name', 'font-face-src',\n\t'font-face-uri', 'hkern', 'vkern', 'glyph', 'glyphRef', 'tref', 'cursor',\n].map(el => normalizeElement(el, SVGNS)));\n\nexport const svgAttributes = Object.freeze([\n\t'accent-height', 'accumulate', 'additive', 'alignment-baseline',\n\t'alphabetic', 'amplitude', 'arabic-form', 'ascent', 'attributeName',\n\t'attributeType', 'azimuth', 'baseFrequency', 'baseline-shift', 'baseProfile',\n\t'bbox', 'begin', 'bias', 'by', 'calcMode', 'cap-height', 'clip',\n\t'clipPathUnits', 'clip-path', 'clip-rule', 'color-interpolation',\n\t'color-interpolation-filters', 'color-profile', 'color-rendering',\n\t'cursor', 'cx', 'cy', 'd', 'decelerate', 'descent', 'diffuseConstant',\n\t'display', 'divisor', 'dominant-baseline', 'dur', 'dx', 'dy', 'edgeMode',\n\t'elevation', 'enable-background', 'exponent', 'fill', 'fill-opacity',\n\t'fill-rule', 'filter','filterUnits', 'flood-color', 'flood-opacity',\n\t'font-family', 'font-size', 'font-size-adjust', 'font-stretch', 'font-style',\n\t'font-variant', 'font-weight', 'format', 'from', 'fr', 'fx', 'fy', 'g1', 'g2',\n\t'glyph-name', 'glyph-orientation-horizontal', 'glyph-orientation-vertical',\n\t'glyphRef', 'gradientTransform', 'gradientUnits', 'hanging',\n\t'horiz-adv-x', 'horiz-origin-x', 'ideographic', 'image-rendering',\n\t'in', 'in2', 'intercept', 'k', 'k1', 'k2', 'k3', 'k4', 'kernelMatrix',\n\t'kernelUnitLength', 'kerning', 'keyPoints', 'keySplines', 'keyTimes',\n\t'lengthAdjust', 'letter-spacing', 'lighting-color', 'limitingConeAngle', 'local',\n\t'marker-end', 'marker-mid', 'marker-start', 'markerHeight', 'markerUnits',\n\t'markerWidth', 'mask', 'maskContentUnits', 'maskUnits', 'mathematical',\n\t'mode', 'numOctaves', 'offset', 'opacity',\n\t'operator', 'order', 'orient', 'orientation', 'origin', 'overflow',\n\t'overline-position', 'overline-thickness', 'panose-1', 'paint-order',\n\t'path', 'pathLength', 'patternContentUnits', 'patternTransform', 'patternUnits',\n\t'pointer-events', 'points', 'pointsAtX', 'pointsAtY', 'pointsAtZ',\n\t'preserveAlpha', 'preserveAspectRatio', 'primitiveUnits', 'r', 'radius',\n\t'refX', 'refY', 'rendering-intent', 'repeatCount',\n\t'repeatDur', 'requiredExtensions', 'requiredFeatures', 'restart', 'result',\n\t'rotate', 'rx', 'ry', 'scale', 'seed', 'shape-rendering', 'slope', 'spacing',\n\t'specularConstant', 'specularExponent', 'speed', 'spreadMethod', 'startOffset',\n\t'stdDeviation', 'stemh', 'stemv', 'stitchTiles', 'stop-color', 'stop-opacity',\n\t'strikethrough-position', 'strikethrough-thickness', 'string', 'stroke',\n\t'stroke-dasharray', 'stroke-dashoffset', 'stroke-linecap', 'stroke-linejoin',\n\t'stroke-miterlimit', 'stroke-opacity', 'stroke-width', 'surfaceScale',\n\t'systemLanguage', 'tableValues', 'targetX', 'targetY',\n\t'text-anchor', 'text-decoration', 'text-rendering', 'textLength', 'to', 'transform',\n\t'transform-origin', 'u1', 'u2', 'underline-position', 'underline-thickness',\n\t'unicode', 'unicode-bidi', 'unicode-range', 'units-per-em', 'v-alphabetic',\n\t'v-hanging', 'v-ideographic', 'v-mathematical', 'values', 'vector-effect',\n\t'vert-adv-y', 'vert-origin-x', 'vert-origin-y', 'viewBox',\n\t'visibility', 'widths', 'word-spacing', 'writing-mode', 'x', 'x-height',\n\t'x1', 'x2', 'xChannelSelector', 'y', 'y1', 'y2', 'yChannelSelector', 'z',\n\t'zoomAndPan', 'autoReverse', 'accelerate', 'xmlns',\n\t{ name: 'actuate', namespace: XLINK },\n\t{ name: 'arcrole', namespaec: XLINK },\n\t{ name: 'href', namespace: XLINK },\n\t{ name: 'role', namespace: XLINK },\n\t{ name: 'show', namespace: XLINK },\n\t{ name: 'title', namespace: XLINK },\n\t{ name: 'type', namespace: XLINK },\n\t{ name: 'space', namespace: XMLNS },\n].map(attr => typeof attr === 'string' ? normalizeAttr(attr) : attr));\n\nexport const attributes = Object.freeze(svgAttributes.concat(globalAttrs));\n\nexport const sanitizer = Object.freeze({ elements, attributes, comments, dataAttributes });\n","import { MATHML as MATHNS } from '@aegisjsproject/sanitizer/namespaces.js';\nimport { attributes as globalAttrs } from '@aegisjsproject/sanitizer/config/global.js';\nimport { normalizeAttr, normalizeElement } from '@aegisjsproject/sanitizer/config-utils.js';\n\nexport const comments = true;\n\nexport const dataAttributes = true;\n\n/**\n *@see https://developer.mozilla.org/en-US/docs/Web/MathML/Element\n */\nexport const elements = Object.freeze([\n\t'math', 'maction', 'annotation', 'annotation-xml', 'menclose', 'merror',\n\t'mfenced', 'mfrac', 'mi', 'mmultiscripts', 'mn', 'mo', 'mover', 'mpadded',\n\t'mphantom', 'mprescripts', 'mroot', 'mrow', 'ms', 'semantics', 'mspace',\n\t'msqrt', 'mstyle', 'msub', 'msup', 'msubsup', 'mtable', 'mtd', 'mtext',\n\t'mtr', 'munder', 'munderover',\n].map(el => normalizeElement(el, MATHNS)));\n\n/**\n * @see https://developer.mozilla.org/en-US/docs/Web/MathML/Attribute\n */\nexport const mathAttributes = Object.freeze([\n\t'accent', 'accentunder', 'actiontype', 'align',\n\t'background', 'close', 'color', 'columnalign', 'columnlines', 'columnspacing',\n\t'columnspan', 'denomalign', 'depth', 'dir', 'display', 'displaystyle', 'fence',\n\t'fontfamily', 'fontsize', 'fontstyle', 'fontweight', 'frame', 'framespacing',\n\t'height', 'href', 'id', 'linethickness', 'lspace', 'lquote', 'mathbackground',\n\t'mathcolor', 'mathsize', 'mathvariant', 'maxsize', 'minsize', 'movablelimits',\n\t'notation', 'numalign', 'open', 'rowalign', 'rowlines', 'rowspacing', 'rowspan',\n\t'rspace', 'rquote', 'scriptlevel', 'scriptminsize', 'scriptsizemultiplier',\n\t'selection', 'separator', 'separators', 'stretchy', 'subscriptshift', 'superscriptshift',\n\t'symmetric', 'voffset', 'width', 'xmlns',\n].map(attr => normalizeAttr(attr, MATHNS)));\n\nexport const attributes = Object.freeze(mathAttributes.concat(globalAttrs));\n\nexport const sanitizer = Object.freeze({ elements, attributes, comments, dataAttributes });\n","import { attributes as globalAttrs } from '@aegisjsproject/sanitizer/config/global.js';\nimport { elements as HTMLElements, htmlAttributes } from '@aegisjsproject/sanitizer/config/html.js';\nimport { elements as SVGElements, svgAttributes } from '@aegisjsproject/sanitizer/config/svg.js';\n\nexport const elements = Object.freeze([...HTMLElements, ...SVGElements]);\n\nexport const attributes = Object.freeze([...globalAttrs, ...htmlAttributes, ...svgAttributes]);\n\nexport const comments = false;\n\nexport const dataAttributes = true;\n\nexport const sanitizer = Object.freeze({ elements, attributes, comments, dataAttributes });\n","import { attributes as globalAttrs } from '@aegisjsproject/sanitizer/config/global.js';\nimport { elements as HTMLElements, htmlAttributes } from '@aegisjsproject/sanitizer/config/html.js';\nimport { elements as SVGElements, svgAttributes } from '@aegisjsproject/sanitizer/config/svg.js';\nimport { elements as MathMLElements, mathAttributes } from '@aegisjsproject/sanitizer/config/mathml.js';\n\nexport const elements = Object.freeze([...HTMLElements, ...SVGElements, ...MathMLElements]);\n\nexport const attributes = Object.freeze([...globalAttrs, ...htmlAttributes, ...svgAttributes, ...mathAttributes]);\n\nexport const comments = true;\n\nexport const dataAttributes = true;\n\nexport const sanitizer = Object.freeze({ elements, attributes, comments, dataAttributes });\n","import { sanitizer as sanitizerConfig } from '@aegisjsproject/sanitizer/config/html.js';\nimport { convertConfig, EVENT_ATTRS } from '@aegisjsproject/sanitizer/config-utils.js';\nimport { createPolicy } from '@aegisjsproject/sanitizer/trust.js';\n\nconst LINK_ATTRS = new Set(['href', 'src' , 'action', 'xlink:href']);\nconst ILLEGAL_PROTOCOLS = new Set(['javascript:', 'data:', 'file:', 'ftp:']);\n\nconst policy = createPolicy('aegis-sanitizer#html', { createHTML: input => input });\n\nexport function setHTML(el, content, {\n\telements = sanitizerConfig.elements,\n\tattributes = sanitizerConfig.attributes,\n\tcomments = sanitizerConfig.comments,\n\tdataAttributes = sanitizerConfig.dataAttributes,\n\tsanitizer,\n\t...rest\n} = sanitizerConfig, { allowInsecure = false } = {}) {\n\tconst tmp = document.createElement('template');\n\ttmp.setHTMLUnsafe(policy.createHTML(content));\n\tsanitize(tmp.content, { elements, attributes, comments, dataAttributes, sanitizer, ...rest }, allowInsecure);\n\tel.replaceChildren(tmp.content);\n}\n\nexport function parseHTML(content, {\n\telements = sanitizerConfig.elements,\n\tattributes = sanitizerConfig.attributes,\n\tcomments = sanitizerConfig.comments,\n\tdataAttributes = sanitizerConfig.dataAttributes,\n\tsanitizer,\n\t...rest\n} = sanitizerConfig, { allowInsecure = false } = {}) {\n\tconst doc = new DOMParser().parseFromString(policy.createHTML(content), 'text/html');\n\tsanitize(doc, { elements, attributes, comments, dataAttributes, sanitizer, ...rest }, allowInsecure);\n\treturn doc;\n}\n\nexport function sanitize(node, config = sanitizerConfig, allowInsecure = false) {\n\tif (! (node instanceof Node)) {\n\t\tthrow new TypeError('Not a node.');\n\t} else {\n\t\tconst converted = convertConfig(config);\n\t\treturn sanitizeNode(node, converted, allowInsecure);\n\t}\n}\n\nfunction isAllowedElement(el, config) {\n\treturn el.namespaceURI in config.elements\n\t\t&& config.elements[el.namespaceURI].some(opt => opt.name === el.localName);\n}\n\nfunction isIllegalURLAttr(attr) {\n\tif (! LINK_ATTRS.has(attr.name)) {\n\t\treturn false;\n\t} else if (! URL.canParse(attr.value)) {\n\t\treturn false;\n\t} else {\n\t\tconst { protocol } = new URL(attr.value);\n\t\treturn ILLEGAL_PROTOCOLS.has(protocol);\n\t}\n}\n\nconst isScriptAttr = 'trustedTypes' in globalThis\n\t? attr => trustedTypes.getAttributeType(\n\t\tattr.ownerElement.tagName, attr.localName,\n\t\tattr.ownerElement.namespaceURI, attr.namespaceURI,\n\t) !== null\n\t: attr => EVENT_ATTRS.has(attr.localName);\n\nfunction isAllowedAttr(attr, config, allowInsecure = false) {\n\tconst ns = attr.namespaceURI || '';\n\n\treturn (\n\t\t(! ('dataAttributes' in config) || config.dataAttributes)\n\t\t&& attr.name.startsWith('data-')\n\t) || (\n\t\tns in config.attributes\n\t\t&& config.attributes[ns].some(opt => opt.name === attr.localName)\n\t\t&& ! (allowInsecure || isScriptAttr(attr))\n\t\t&& ! (allowInsecure || isIllegalURLAttr(attr))\n\t);\n}\n\nfunction sanitizeNode(node, config, allowInsecure = false) {\n\tswitch(node.nodeType) {\n\t\tcase Node.ELEMENT_NODE:\n\t\t\tsanitizeElement(node, config,  allowInsecure);\n\t\t\tbreak;\n\n\t\tcase Node.DOCUMENT_NODE:\n\t\tcase Node.DOCUMENT_FRAGMENT_NODE:\n\t\t\tsanitizeFragOrDoc(node, config, allowInsecure);\n\t\t\tbreak;\n\n\t\tcase Node.COMMENT_NODE:\n\t\t\tsanitizeComment(node, config, allowInsecure);\n\t\t\tbreak;\n\n\t\tcase Node.ATTRIBUTE_NODE:\n\t\t\tsanitizeAttr(node, config, allowInsecure);\n\t\t\tbreak;\n\n\t\tcase Node.TEXT_NODE:\n\t\tcase Node.DOCUMENT_TYPE_NODE:\n\t\t\tbreak;\n\n\t\tdefault:\n\t\t\tif (node.ownerElement instanceof Element) {\n\t\t\t\tnode.ownerElement.removeChild(node);\n\t\t\t}\n\t}\n}\n\nfunction sanitizeElement(el, config, allowInsecure) {\n\tif (! isAllowedElement(el, config)) {\n\t\tel.remove();\n\t} else {\n\t\tif (el.hasAttributes()) {\n\t\t\tconst attrs = el.attributes;\n\n\t\t\tfor (let i = attrs.length - 1; i !== -1; i--) {\n\t\t\t\tsanitizeAttr(attrs[i], config, allowInsecure);\n\t\t\t}\n\t\t}\n\n\t\tif (el.tagName === 'TEMPLATE') {\n\t\t\tsanitizeFragOrDoc(el.content, config, allowInsecure);\n\t\t} else if (el.hasChildNodes()) {\n\t\t\tconst childNodes = el.childNodes;\n\n\t\t\tfor (let i = childNodes.length - 1; i !== -1; i--) {\n\t\t\t\tsanitizeNode(childNodes[i], config, allowInsecure);\n\t\t\t}\n\t\t}\n\t}\n}\n\nfunction sanitizeAttr(attr, config, allowInsecure = false) {\n\tif (! isAllowedAttr(attr, config,  allowInsecure) && attr.ownerElement instanceof Element) {\n\t\tattr.ownerElement.removeAttributeNode(attr);\n\t}\n}\n\nfunction sanitizeFragOrDoc(node, config,  allowInsecure = false) {\n\tif (node.hasChildNodes()) {\n\t\tconst childNodes = node.childNodes;\n\n\t\tfor (let i = childNodes.length - 1; i !== -1; i--) {\n\t\t\tsanitizeNode(childNodes[i], config, allowInsecure);\n\t\t}\n\t}\n}\n\nfunction sanitizeComment(node, config) {\n\tif (! config.comments) {\n\t\tnode.remove();\n\t}\n}\n","export function createPolicy(name, { createHTML: html, createScript: script, createScriptURL: scriptURL }) {\n\tif ('trustedTypes' in globalThis) {\n\t\treturn trustedTypes.createPolicy(name, { createHTML: html, createScript: script, createScriptURL: scriptURL });\n\t} else {\n\t\treturn Object.freeze({\n\t\t\t[Symbol.for('policy-name')]: name.toString(),\n\t\t\tcreateHTML(input, ...args) {\n\t\t\t\tif (html instanceof Function) {\n\t\t\t\t\tconst result = html(input.toString(), ...args).toString();\n\n\t\t\t\t\treturn Object.freeze({\n\t\t\t\t\t\ttoString() {\n\t\t\t\t\t\t\treturn result;\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\t\t\t\t} else {\n\t\t\t\t\tthrow new TypeError(`Policy \"${name}\" does not provide a createHTML method.`);\n\t\t\t\t}\n\t\t\t},\n\t\t\tcreateScript(input, ...args) {\n\t\t\t\tif (script instanceof Function) {\n\t\t\t\t\tconst result = script(input.toString(), ...args).toString();\n\n\t\t\t\t\treturn Object.freeze({\n\t\t\t\t\t\ttoString() {\n\t\t\t\t\t\t\treturn result;\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\t\t\t\t} else {\n\t\t\t\t\tthrow new TypeError(`Policy \"${name}\" does not provide a createScript method.`);\n\t\t\t\t}\n\t\t\t},\n\t\t\tcreateScriptURL(input, ...args) {\n\t\t\t\tif (scriptURL instanceof Function) {\n\t\t\t\t\tconst result = scriptURL(input.toString(), ...args).toString();\n\n\t\t\t\t\treturn Object.freeze({\n\t\t\t\t\t\ttoString() {\n\t\t\t\t\t\t\treturn result;\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\t\t\t\t} else {\n\t\t\t\t\tthrow new TypeError(`Policy \"${name}\" does not provide a createScriptURL method.`);\n\t\t\t\t}\n\t\t\t},\n\t\t});\n\t}\n}\n\nexport function createSanitizerPolicy(name = 'aegis#html', { defaultConfig = {} }= {}) {\n\treturn createPolicy(name, {\n\t\tcreateHTML(input, {\n\t\t\telements = defaultConfig.elements,\n\t\t\tattributes = defaultConfig.attributes,\n\t\t\tcomments = defaultConfig.comments,\n\t\t\tdataAttributes = defaultConfig.dataAttributes,\n\t\t\tsanitizer,\n\t\t\t...rest\n\t\t}  = defaultConfig) {\n\t\t\tconst el = document.createElement('div');\n\n\t\t\tif (typeof sanitizer === 'object') {\n\t\t\t\tel.setHTML(input, { sanitizer });\n\t\t\t} else {\n\t\t\t\tel.setHTML(input, { sanitizer: { elements, attributes, comments, dataAttributes, ...rest }});\n\n\t\t\t}\n\t\t\treturn el.innerHTML;\n\t\t}\n\t});\n}\n","import './sanitizer.js';\nimport { setHTML as html, parseHTML as parse } from '@aegisjsproject/sanitizer/sanitize.js';\n\nif (! (Promise.withResolvers instanceof Function)) {\n\tPromise.withResolvers = function withResolvers() {\n\t\tconst def = {};\n\t\tdef.promise = new Promise((resolve, reject) => {\n\t\t\tdef.resolve = resolve;\n\t\t\tdef.reject = reject;\n\t\t});\n\t\treturn def;\n\t};\n}\n\n/**\n * This is needed for working with sanitizer configs & attrs\n */\n\nif (! (URL.canParse instanceof Function)) {\n\tURL.canParse = function canParse(url, base) {\n\t\ttry {\n\t\t\tnew URL(url, base);\n\t\t\treturn true;\n\t\t} catch {\n\t\t\treturn false;\n\t\t}\n\t};\n}\n\nif (! (URL.parse instanceof Function)) {\n\tURL.parse = function parse(url, base) {\n\t\ttry {\n\t\t\treturn new URL(url, base);\n\t\t} catch {\n\t\t\treturn null;\n\t\t}\n\t};\n}\n\nif (! (Object.groupBy instanceof Function)) {\n\tObject.groupBy = function groupBy(arr, callback) {\n\t\tconst obj = {};\n\t\tfor (const item of arr) {\n\t\t\tconst key = callback(item);\n\n\t\t\tif (! (key in obj)) {\n\t\t\t\tobj[key] = [item];\n\t\t\t} else {\n\t\t\t\tobj[key].push(item);\n\t\t\t}\n\t\t}\n\n\t\treturn obj;\n\t};\n}\n\nif (! (Element.prototype.setHTML instanceof Function)) {\n\tElement.prototype.setHTML = function setHTML(content, {\n\t\telements,\n\t\tattributes,\n\t\tcomments,\n\t\tdataAttributes,\n\t\tsanitizer,\n\t\t...rest\n\t} = {}) {\n\t\t/**\n\t\t * @todo Remove legacy support for v1.0.0\n\t\t */\n\t\tif (typeof sanitizer === 'object' && sanitizer !== null) {\n\t\t\thtml(this, content, sanitizer.getConfiguration instanceof Function\n\t\t\t\t? sanitizer.getConfiguration()\n\t\t\t\t: sanitizer);\n\t\t} else {\n\t\t\thtml(this, content, { elements, attributes, comments, dataAttributes, ...rest });\n\t\t}\n\t};\n\n\tDocumentFragment.prototype.setHTML = function setHTML(...args) {\n\t\tElement.prototype.setHTML.apply(this, args);\n\t};\n\n\tHTMLTemplateElement.prototype.setHTML = function setHTML(html, config) {\n\t\tthis.content.setHTML(html, config);\n\t};\n}\n\nif (! (Document.parseHTML instanceof Function)) {\n\tDocument.parseHTML = function parseHTML(content, {\n\t\telements,\n\t\tattributes,\n\t\tcomments,\n\t\tdataAttributes,\n\t\tsanitizer,\n\t\t...rest\n\t} = {}) {\n\t\t/**\n\t\t * @todo Remove legacy support for v1.0.0\n\t\t */\n\t\tif (typeof sanitizer === 'object' && sanitizer !== null) {\n\t\t\treturn Document.parseHTML(content, sanitizer.getConfiguration instanceof Function\n\t\t\t\t? sanitizer.getConfiguration()\n\t\t\t\t: sanitizer);\n\t\t} else {\n\t\t\treturn parse(content, { elements, attributes, comments, dataAttributes, ...rest });\n\t\t}\n\t};\n}\n"],"names":["HTML","XLINK","MATHML","EVENT_ATTRS","Set","globalThis","Object","keys","HTMLElement","prototype","filter","name","startsWith","normalizeElement","opt","defaultNS","HTMLNS","freeze","namespace","attributes","length","TypeError","normalizeElementsConfig","elements","allowElements","Array","isArray","console","warn","map","normalizeAttr","rest","normalizeAttrsConfig","allowAttributes","entries","normalizeCommentsConfig","comments","allowComments","convertAttrConfig","groupBy","convertElementConfig","convertConfig","config","elementNS","attributeNS","get","Function","dataAttributes","attr","el","htmlAttributes","concat","globalAttrs","sanitizer","svgAttributes","namespaec","MATHNS","mathAttributes","HTMLElements","SVGElements","MathMLElements","LINK_ATTRS","ILLEGAL_PROTOCOLS","policy","createHTML","html","createScript","script","createScriptURL","scriptURL","trustedTypes","createPolicy","Symbol","for","toString","input","args","result","setHTML","content","sanitizerConfig","allowInsecure","tmp","document","createElement","setHTMLUnsafe","sanitize","replaceChildren","parseHTML","doc","DOMParser","parseFromString","node","Node","sanitizeNode","isScriptAttr","getAttributeType","ownerElement","tagName","localName","namespaceURI","has","isAllowedAttr","ns","some","URL","canParse","value","protocol","isIllegalURLAttr","nodeType","ELEMENT_NODE","isAllowedElement","hasAttributes","attrs","i","sanitizeAttr","sanitizeFragOrDoc","hasChildNodes","childNodes","remove","sanitizeElement","DOCUMENT_NODE","DOCUMENT_FRAGMENT_NODE","COMMENT_NODE","sanitizeComment","ATTRIBUTE_NODE","TEXT_NODE","DOCUMENT_TYPE_NODE","Element","removeChild","removeAttributeNode","Promise","withResolvers","def","promise","resolve","reject","url","base","parse","arr","callback","obj","item","key","push","this","getConfiguration","DocumentFragment","apply","HTMLTemplateElement","Document"],"mappings":"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"}